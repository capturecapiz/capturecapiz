<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4 Pics 1 Word - Capiz Edition (15 Rounds)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f4f8;
        }
        .image-placeholder {
            background-color: #e2e8f0;
            color: #4a5568;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: 600;
            padding: 0.5rem;
            background-size: cover;
            background-position: center;
            transition: transform 0.3s ease;
        }
        .image-placeholder:hover {
            transform: scale(1.05);
        }
        .letter-btn, .answer-box {
            transition: all 0.2s ease-in-out;
        }
        .letter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .correct {
            animation: tada 1s ease;
        }
        .incorrect {
            animation: shake 0.5s ease;
        }
        .hint-revealed {
            background-color: #d1fae5 !important; /* A light green to show it's a hint */
            color: #065f46 !important;
            cursor: not-allowed;
        }
        @keyframes tada {
            from { transform: scale3d(1, 1, 1); }
            10%, 20% { transform: scale3d(0.9, 0.9, 0.9) rotate3d(0, 0, 1, -3deg); }
            30%, 50%, 70%, 90% { transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg); }
            40%, 60%, 80% { transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg); }
            to { transform: scale3d(1, 1, 1); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            text-align: center;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
            animation: slide-in 0.3s ease-out;
        }
        @keyframes slide-in {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <audio id="background-audio" src="https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic.mp3" loop autoplay></audio>
    <audio id="correct-answer-audio" src="https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic_winner.mp3"></audio>
    <audio id="game-over-audio" src="https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic_over.mp3"></audio>

    <div id="game-container" class="w-full max-w-md mx-auto bg-white rounded-2xl shadow-xl p-6">
        <header class="text-center mb-4">
            <h1 class="text-2xl sm:text-3xl font-bold text-slate-800">4 Pics 1 Word</h1>
            <p class="text-slate-500">Capiz Edition</p>
            <div class="flex justify-between items-center mt-4 text-slate-600">
                <p>Level: <span id="level-display" class="font-bold text-indigo-600">1</span> </p>
                <p>Score: <span id="score-display" class="font-bold text-indigo-600">0</span></p>
                <div class="flex items-center gap-2">
                    <p>Time: <span id="timer-display" class="font-bold text-red-500">60</span>s</p>
                    <button id="hint-btn" class="bg-yellow-400 hover:bg-yellow-500 text-yellow-800 font-bold p-2 rounded-full h-8 w-8 flex items-center justify-center shadow-md transition-opacity relative">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                           <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm-7.071 0a1 1 0 001.414 1.414l.707-.707a1 1 0 10-1.414-1.414l-.707.707zM10 16a1 1 0 100 2 1 1 0 000-2z" />
                        </svg>
                        <span id="hint-count-display" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">1</span>
                    </button>
                </div>
            </div>
        </header>

        <main>
            <div id="image-grid" class="grid grid-cols-2 gap-2 mb-6 rounded-lg overflow-hidden"></div>
            <div id="answer-area" class="flex justify-center items-center gap-2 mb-6 h-12"></div>
            <div id="message-area" class="text-center h-6 mb-4 font-semibold"></div>
            <div id="letter-choices" class="grid grid-cols-7 gap-2"></div>
            <div class="mt-6 flex justify-center">
                <button id="next-level-btn" class="hidden bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-full shadow-md">
                    Next Level
                </button>
            </div>
        </main>
    </div>

    <div id="game-over-modal" class="modal-overlay hidden">
        <div class="modal-content w-11/12 max-w-sm">
            <h2 class="text-3xl font-bold text-red-600 mb-4">Game Over!</h2>
            <p class="text-slate-700 text-lg mb-2">Time's up!</p>
            <p class="text-slate-700 text-lg mb-4">
                The correct answer was: <span id="correct-answer-display" class="font-bold text-indigo-600"></span>
            </p>
            <p class="text-slate-700 text-lg">Your Final Score: <span id="final-score" class="font-bold">0</span></p>
            <button id="restart-btn" class="mt-6 bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-full shadow-md">
                Play Again
            </button>
        </div>
    </div>
    
    <div id="info-modal" class="modal-overlay hidden">
        <div class="modal-content w-11/12 max-w-sm">
            <h2 class="text-2xl font-bold text-indigo-600 mb-4">Did You Know?</h2>
            <p id="info-description" class="text-slate-700 text-left mb-6 text-base"></p>
            <button id="continue-btn" class="mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-full shadow-md">
                Continue
            </button>
        </div>
    </div>


    <script>
        // --- GAME DATA (NOW WITH DESCRIPTIONS) ---
        const gameLevels = [
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/capizmap.png", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/logo.png", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/seafood.png", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/capizshell.jpg"], answer: "CAPIZ", description: "Capiz is known as the 'Seafood Capital of the Philippines' and is famous for the Placuna placenta oyster shell, locally known as 'kapis,' which is used in decorative items and traditional windows." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/manuel.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/roxascity.png", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/bridge.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/bandstand.jpg"], answer: "ROXAS", description: "Roxas City is the capital of Capiz. It was named after Manuel Roxas, the first President of the Third Philippine Republic, who was born here." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/bangus.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/alimango.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/talaba.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/hipon.jpg"], answer: "SEAFOOD", description: "With its long coastline and rich fishing grounds, Capiz offers an abundance of fresh seafood like prawns, crabs, oysters ('talaba'), and milkfish ('bangus')." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/stamonica.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/bell.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/stone.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/panay1.jpg"], answer: "CHURCH", description: "The Santa Monica Parish Church in Panay, Capiz, is a National Historical Landmark. It houses the largest Catholic church bell in Asia, made from 70 sacks of coins donated by the townsfolk." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/dance.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/colorful.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/colorful1.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/colorful2.jpg"], answer: "FESTIVAL", description: "Capiz celebrates many festivals. The most prominent is 'Sinadya sa Halaran' in Roxas City, which means 'Joy in Sharing and Thanksgiving'." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/cave.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/cave1.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/cave2.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/cave3.jpg"], answer: "CAVE", description: "Capiz is home to many caves, such as the Suhot Cave in Dumalag and the Pilar Cave. These caves are known for their beautiful rock formations and underground streams." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/beach1.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/beach2.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/beach3.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/beach4.jpg"], answer: "BEACH", description: "Baybay Beach in Roxas City is a popular local spot known for its long stretch of fine, gray sand and the numerous seafood restaurants that line its shore." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/panay.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/panay1.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/bell.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/panay2.jpg"], answer: "PANAY", description: "Panay is one of the municipalities in Capiz and is the second oldest Spanish settlement in the Philippines. It's home to the historic Santa Monica Church." },
            // Adding a few more descriptions for variety
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/dumalag.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/dumalag1.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/dumalag2.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/dumalag3.jpg"], answer: "DUMALAG", description: "The municipality of Dumalag is known for the Suhot Cave and Spring, a popular destination for tourists seeking natural attractions." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/sinadya.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/sinadya2.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/sinadya3.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/sinadya4.jpg"], answer: "SINADYA", description: "Sinadya sa Halaran is the premier festival of Roxas City, Capiz. 'Sinadya' is the Hiligaynon word for joy, while 'Halaran' means place of offering." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/kapis.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/kapis2.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/kapis3.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/kapis4.jpg"], answer: "SHELL", description: "The 'Kapis' or Capiz shell is a type of oyster shell used for making windows, lanterns, and other decorative handicrafts, which the province is famous for." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/bridgea.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/bridgea2.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/bridgea3.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/bridgea4.jpg"], answer: "BRIDGE", description: "Roxas City features several iconic bridges that cross the Panay River, which meanders through the city center, adding to its scenic charm." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/pres.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/pres2.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/pres3.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/pres4.jpg"], answer: "PRESIDENT", description: "Capiz is the birthplace of Manuel Roxas, who became the first President of the independent Third Republic of the Philippines." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/talabaa.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/talabaa2.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/talabaa3.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/talabaa4.jpg"], answer: "OYSTER", description: "Capiz is famous for its delicious and affordable oysters, locally known as 'talaba'. They are often farmed in coastal areas and are a staple in local seafood restaurants." },
            { images: ["https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/pilar.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/pilar1.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/pilar2.jpg", "https://raw.githubusercontent.com/capturecapiz/capturecapiz/main/html/assets/img/4pic/pilar3.jpg"], answer: "PILAR", description: "Pilar is a coastal municipality in Capiz known for its historical sites like the Balisong Cave, which served as a refuge for revolutionaries." }
        ];

        // --- GAME STATE ---
        let currentLevelIndex = 0;
        let score = 0;
        let timeLeft = 60;
        let timerInterval = null;
        let shuffledLevels = [];
        let hintCount = 1;

        // --- DOM ELEMENTS ---
        const levelDisplay = document.getElementById('level-display');
        const scoreDisplay = document.getElementById('score-display');
        const timerDisplay = document.getElementById('timer-display');
        const imageGrid = document.getElementById('image-grid');
        const answerArea = document.getElementById('answer-area');
        const letterChoices = document.getElementById('letter-choices');
        const messageArea = document.getElementById('message-area');
        const nextLevelBtn = document.getElementById('next-level-btn');
        const hintBtn = document.getElementById('hint-btn');
        const hintCountDisplay = document.getElementById('hint-count-display');
        const gameContainer = document.getElementById('game-container');
        const gameOverModal = document.getElementById('game-over-modal');
        const restartBtn = document.getElementById('restart-btn');
        const finalScoreDisplay = document.getElementById('final-score');
        const correctAnswerDisplay = document.getElementById('correct-answer-display');
        const backgroundAudio = document.getElementById('background-audio');
        const correctAnswerAudio = document.getElementById('correct-answer-audio');
        const gameOverAudio = document.getElementById('game-over-audio');
        
        // NEW: Info Modal elements
        const infoModal = document.getElementById('info-modal');
        const infoDescription = document.getElementById('info-description');
        const continueBtn = document.getElementById('continue-btn');

        // --- FUNCTIONS ---

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        function startNewGame() {
            gameOverAudio.pause();
            gameOverAudio.currentTime = 0;
            currentLevelIndex = 0;
            score = 0;
            hintCount = 1;
            gameOverModal.classList.add('hidden');
            
            const allLevelsShuffled = [...gameLevels];
            shuffleArray(allLevelsShuffled);
            shuffledLevels = allLevelsShuffled.slice(0, 15);
            
            loadLevel();

            backgroundAudio.currentTime = 0;
            backgroundAudio.play().catch(e => console.log("Autoplay blocked by browser."));
        }

        function startNewTimer() {
            clearInterval(timerInterval);
            timeLeft = 60;
            timerDisplay.textContent = timeLeft;
            timerInterval = setInterval(updateTimer, 1000);
        }
        
        function updateHintDisplay() {
            hintCountDisplay.textContent = hintCount;
            hintBtn.disabled = hintCount <= 0;
            hintBtn.classList.toggle('opacity-50', hintCount <= 0);
            hintBtn.classList.toggle('cursor-not-allowed', hintCount <= 0);
        }

        function loadLevel() {
            if (currentLevelIndex >= shuffledLevels.length) {
                clearInterval(timerInterval);
                gameContainer.innerHTML = `
                    <div class="text-center">
                        <h2 class="text-3xl font-bold text-green-600 mb-4">Congratulations!</h2>
                        <p class="text-slate-700 text-lg mb-2">You have completed all 15 levels.</p>
                        <p class="text-slate-700 text-lg">Final Score: <span class="font-bold">${score}</span></p>
                        <button onclick="startNewGame()" class="mt-6 bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-full shadow-md">Play Again</button>
                    </div>
                `;
                return;
            }
            
            startNewTimer();
            updateHintDisplay();

            const levelData = shuffledLevels[currentLevelIndex];
            levelDisplay.textContent = `${currentLevelIndex + 1} / ${shuffledLevels.length}`;
            scoreDisplay.textContent = score;
            messageArea.textContent = '';
            nextLevelBtn.classList.add('hidden');

            imageGrid.innerHTML = '';
            levelData.images.forEach(src => {
                const imgContainer = document.createElement('div');
                imgContainer.className = 'aspect-square image-placeholder rounded-md';
                imgContainer.style.backgroundImage = `url(${src})`;
                imgContainer.onerror = function() { this.style.backgroundImage = `url('https://placehold.co/200x200/e2e8f0/4a5568?text=Image+Error')`; };
                imageGrid.appendChild(imgContainer);
            });

            answerArea.innerHTML = '';
            levelData.answer.split('').forEach((_, i) => {
                const box = document.createElement('div');
                box.className = 'answer-box w-10 h-12 sm:w-12 sm:h-14 bg-slate-200 rounded-md flex items-center justify-center text-2xl font-bold text-slate-700 cursor-pointer';
                box.dataset.index = i;
                box.addEventListener('click', handleAnswerBoxClick);
                answerArea.appendChild(box);
            });

            const answerLetters = levelData.answer.split('');
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            let choiceLetters = [...answerLetters];
            while (choiceLetters.length < 14) {
                const randomLetter = alphabet[Math.floor(Math.random() * alphabet.length)];
                if (choiceLetters.filter(l => l === randomLetter).length < 2) {
                     choiceLetters.push(randomLetter);
                }
            }
            shuffleArray(choiceLetters);

            letterChoices.innerHTML = '';
            choiceLetters.forEach(letter => {
                const btn = document.createElement('button');
                btn.className = 'letter-btn bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 rounded-md';
                btn.textContent = letter;
                btn.addEventListener('click', () => selectLetter(btn));
                letterChoices.appendChild(btn);
            });
        }

        function handleAnswerBoxClick(event) {
            const box = event.currentTarget;
            if (!box.classList.contains('hint-revealed')) {
                returnLetter(box);
            }
        }

        function selectLetter(letterBtn) {
            const emptyBox = Array.from(document.querySelectorAll('.answer-box')).find(box => !box.textContent);
            if (emptyBox) {
                emptyBox.textContent = letterBtn.textContent;
                letterBtn.style.visibility = 'hidden';
                checkAnswer();
            }
        }

        function returnLetter(answerBox) {
            if (!answerBox.textContent) return;
            const letterToReturn = answerBox.textContent;
            answerBox.textContent = '';
            const hiddenButton = Array.from(document.querySelectorAll('.letter-btn')).find(btn => btn.textContent === letterToReturn && btn.style.visibility === 'hidden');
            if (hiddenButton) {
                hiddenButton.style.visibility = 'visible';
            }
        }
        
        function resetAnswer() {
            document.querySelectorAll('.answer-box').forEach(box => {
                if (box.textContent && !box.classList.contains('hint-revealed')) {
                    returnLetter(box);
                }
            });
        }

        function checkAnswer() {
            const answerBoxes = document.querySelectorAll('.answer-box');
            let currentGuess = Array.from(answerBoxes).map(box => box.textContent).join('');
            
            if (currentGuess.length === shuffledLevels[currentLevelIndex].answer.length) {
                if (currentGuess === shuffledLevels[currentLevelIndex].answer) {
                    clearInterval(timerInterval);
                    correctAnswerAudio.play();
                    messageArea.textContent = 'Correct!';
                    messageArea.className = 'text-center h-6 mb-4 font-semibold text-green-500';
                    score += 10;
                    if (hintCount < 6) hintCount++;
                    updateHintDisplay();
                    scoreDisplay.textContent = score;
                    answerArea.classList.add('correct');
                    
                    // MODIFIED: Show info modal instead of next level button
                    setTimeout(() => {
                        answerArea.classList.remove('correct');
                        showInfoModal();
                    }, 1000);

                } else {
                    messageArea.textContent = 'Try Again!';
                    messageArea.className = 'text-center h-6 mb-4 font-semibold text-red-500';
                    answerArea.classList.add('incorrect');
                    letterChoices.style.pointerEvents = 'none';
                    setTimeout(() => {
                        answerArea.classList.remove('incorrect');
                        messageArea.textContent = '';
                        resetAnswer();
                        letterChoices.style.pointerEvents = 'auto';
                    }, 1000);
                }
            }
        }
        
        // NEW: Function to show the info modal
        function showInfoModal() {
            const levelData = shuffledLevels[currentLevelIndex];
            infoDescription.textContent = levelData.description || "No description available for this topic.";
            infoModal.classList.remove('hidden');
        }

        function giveHint() {
            if (hintCount <= 0) return;

            const correctAnswer = shuffledLevels[currentLevelIndex].answer;
            const answerBoxes = document.querySelectorAll('.answer-box');
            let hintIndex = Array.from(answerBoxes).findIndex((box, i) => box.textContent !== correctAnswer[i]);

            if (hintIndex === -1) return;

            hintCount--;
            updateHintDisplay();

            const correctLetter = correctAnswer[hintIndex];
            const targetBox = answerBoxes[hintIndex];

            if (targetBox.textContent) returnLetter(targetBox);

            const buttonToPress = Array.from(document.querySelectorAll('.letter-btn')).find(btn => btn.textContent === correctLetter && btn.style.visibility !== 'hidden');
            
            if (buttonToPress) {
                selectLetter(buttonToPress);
                targetBox.classList.add('hint-revealed');
            }
            checkAnswer();
        }

        function updateTimer() {
            timeLeft--;
            timerDisplay.textContent = timeLeft;
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                showGameOverModal();
            }
        }

        function showGameOverModal() {
            backgroundAudio.pause();
            gameOverAudio.play();
            finalScoreDisplay.textContent = score;
            correctAnswerDisplay.textContent = shuffledLevels[currentLevelIndex].answer;
            gameOverModal.classList.remove('hidden');
        }

        // --- EVENT LISTENERS ---
        nextLevelBtn.addEventListener('click', () => {
            currentLevelIndex++;
            loadLevel();
        });

        hintBtn.addEventListener('click', giveHint);
        restartBtn.addEventListener('click', startNewGame);

        // NEW: Event listener for the info modal's continue button
        continueBtn.addEventListener('click', () => {
            infoModal.classList.add('hidden');
            nextLevelBtn.classList.remove('hidden');
        });

        // --- INITIALIZE GAME ---
        document.addEventListener('DOMContentLoaded', () => {
            document.body.addEventListener('click', () => {
                backgroundAudio.play().catch(e => console.log("Autoplay blocked. Waiting for user interaction."));
            }, { once: true });
            
            startNewGame();
        });

    </script>
</body>
</html>
